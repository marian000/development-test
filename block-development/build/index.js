(()=>{"use strict";var e,t={725:()=>{const e=window.React,t=window.wp.element,n=window.wp.data,a=window.wp.coreData,o=window.wp.components;function l({onCategoryChange:t,selectedCategoryId:a}){const l=(0,n.useSelect)((e=>e("core").getEntityRecords("taxonomy","product_categories",{per_page:100})||[]),[]);return(0,e.createElement)(o.SelectControl,{label:"Select a Category",value:a,options:[{label:"Select...",value:""},...l.map((e=>({label:e.name,value:e.id})))],onChange:t})}const r=window.wp.blockEditor;function c({onFileSelect:t}){return(0,e.createElement)(r.MediaUploadCheck,null,(0,e.createElement)(r.MediaUpload,{onSelect:t,allowedTypes:["image"],value:null,render:({open:t})=>(0,e.createElement)(o.Button,{onClick:t},"Upload Image")}))}function s({onCancel:r,onSaveFinished:s}){const[i,d]=(0,t.useState)(""),[u,p]=(0,t.useState)(""),[m,E]=(0,t.useState)(0),[g,y]=(0,t.useState)(""),[h,v]=(0,t.useState)(""),[C,b]=(0,t.useState)(!1),[S,w]=(0,t.useState)(""),[f,T]=(0,t.useState)(""),{saveEntityRecord:_}=(0,n.useDispatch)(a.store);return(0,n.useSelect)((e=>e(a.store).getEntityRecords("taxonomy","product_categories",{per_page:-1})),[]),(0,e.createElement)(o.PanelBody,null,(0,e.createElement)(o.TextControl,{label:"Product Title",value:i,onChange:d}),(0,e.createElement)(o.TextControl,{label:"Description",value:u,onChange:p}),(0,e.createElement)(c,{onFileSelect:function(e){console.log("Selected media ID:",e.id),console.log("Selected media URL:",e.url)}}),m&&(0,e.createElement)("p",null,"Image ID: ",m),(0,e.createElement)(o.TextControl,{label:"Price",value:g,onChange:y}),(0,e.createElement)(o.TextControl,{label:"Sale Price",value:h,onChange:v}),(0,e.createElement)(o.CheckboxControl,{label:"Is On Sale?",checked:C,onChange:b}),(0,e.createElement)(o.TextControl,{label:"YouTube Video URL",value:S,onChange:w}),(0,e.createElement)(l,{onCategoryChange:T,selectedCategoryId:f}),(0,e.createElement)(o.Button,{isPrimary:!0,onClick:async()=>{console.log("save product");const e={title:i,content:u,status:"publish",featured_media:m,meta:{price:g,sale_price:h,is_on_sale:C,youtube_video:S},categories:[f]},t=await _("postType","products",e);console.log("savedRecord ",t),t&&s()},disabled:!i||!u},"Save Product"),(0,e.createElement)(o.Button,{onClick:r},"Cancel"))}function i(){const[n,a]=(0,t.useState)(!1),l=()=>a(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{onClick:()=>a(!0),variant:"primary"},"Create a new Product"),n&&(0,e.createElement)(o.Modal,{onRequestClose:l,title:"Create a new Product"},(0,e.createElement)(s,{onCancel:l,onSaveFinished:l})))}const d=window.wp.htmlEntities;function u({pageId:r,onCancel:s,onSaveFinished:i}){const[d,u]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[E,g]=(0,t.useState)(0),[y,h]=(0,t.useState)(""),[v,C]=(0,t.useState)(""),[b,S]=(0,t.useState)(!1),[w,f]=(0,t.useState)(""),[T,_]=(0,t.useState)(""),{editEntityRecord:k,saveEditedEntityRecord:R}=(0,n.useDispatch)(a.store),{page:x}=(0,n.useSelect)((e=>({page:e(a.store).getEditedEntityRecord("postType","products",r)})),[r]);return(0,t.useEffect)((()=>{x&&(console.log("page ",x),u(x.title),m(x.content),g(x?.featured_media||0),h(x?.meta?.price||""),C(x?.meta?.sale_price||""),S(x?.meta?.is_on_sale||!1),f(x?.meta?.youtube_video||""),_(x?.product_categories?.[0]||""))}),[x]),(0,e.createElement)(o.PanelBody,null,(0,e.createElement)(o.TextControl,{label:"Product Title",value:d,onChange:e=>{u(e),k("postType","products",r,{title:e})}}),(0,e.createElement)(o.TextControl,{label:"Description",value:p,onChange:e=>{m(e),k("postType","products",r,{content:e})}}),(0,e.createElement)(c,{onImageSelect:g}),(0,e.createElement)(o.TextControl,{label:"Price",value:y,onChange:e=>{h(e),k("postType","products",r,{meta:{price:e}})}}),(0,e.createElement)(o.TextControl,{label:"Sale Price",value:v,onChange:e=>{C(e),k("postType","products",r,{meta:{sale_price:e}})}}),(0,e.createElement)(o.CheckboxControl,{label:"Is On Sale?",checked:b,onChange:e=>{S(e),k("postType","products",r,{meta:{is_on_sale:e}})}}),(0,e.createElement)(o.TextControl,{label:"YouTube Video URL",value:w,onChange:e=>{f(e),k("postType","products",r,{meta:{youtube_video:e}})}}),(0,e.createElement)(l,{selectedCategoryId:T,onCategoryChange:e=>{_(e),k("postType","products",r,{product_categories:[e]})}}),(0,e.createElement)(o.Button,{isPrimary:!0,onClick:async()=>{const e={title:d,content:p,featured_media:E,status:"publish",meta:{price:y,sale_price:v,is_on_sale:b,youtube_video:w},product_categories:[T]};console.log("productData",e);const t=await R("postType","products",r,e);console.log("updatedRecord ",t),t&&i()},disabled:!d||!p},"Update Product"),(0,e.createElement)(o.Button,{onClick:s},"Cancel"))}function p({pageId:n}){const[a,l]=(0,t.useState)(!1),r=()=>l(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{onClick:()=>l(!0),variant:"primary"},"Edit"),a&&(0,e.createElement)(o.Modal,{onRequestClose:r,title:"Edit page"},(0,e.createElement)(u,{pageId:n,onCancel:r,onSaveFinished:r})))}const m=window.wp.notices,E=({productId:l})=>{const{createSuccessNotice:r,createErrorNotice:c}=(0,n.useDispatch)(m.store),{getLastEntityDeleteError:s}=(0,n.useSelect)(a.store),{deleteEntityRecord:i}=(0,n.useDispatch)(a.store),{isDeleting:d,error:u}=(0,n.useSelect)((e=>({isDeleting:e(a.store).isDeletingEntityRecord("postType","products",l),error:e(a.store).getLastEntityDeleteError("postType","products",l)})),[l]);return(0,t.useEffect)((()=>{}),[u]),(0,e.createElement)(o.Button,{variant:"secondary",onClick:async()=>{if(await i("postType","products",l))r("The Product was deleted!",{type:"snackbar"});else{const e=s("postType","products",l);c((e?.message||"There was an error.")+" Please refresh the page and try again.",{type:"snackbar"})}},disabled:d},d?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Spinner,null),"Deleting..."):"Delete")};function g({hasResolved:t,pages:n}){return t?n?.length?(0,e.createElement)("table",{className:"wp-list-table widefat fixed striped table-view-list"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("td",null,"Featured Image"),(0,e.createElement)("td",null,"Title"),(0,e.createElement)("td",{style:{width:190}},"Actions"))),(0,e.createElement)("tbody",null,n?.map((t=>{const n=t?.featured_image_src?(0,e.createElement)("img",{src:t?.featured_image_src,alt:t.title.rendered,style:{width:"50px"}}):(0,e.createElement)("img",{style:{width:"50px"},src:"https://via.placeholder.com/150",alt:t.title.rendered});return(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,n),(0,e.createElement)("td",null,(0,d.decodeEntities)(t.title.rendered)),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"form-buttons"},(0,e.createElement)(p,{pageId:t.id}),(0,e.createElement)(E,{productId:t.id}))))})))):(0,e.createElement)("div",null,"No results"):(0,e.createElement)(o.Spinner,null)}function y(){const{pages:t,hasResolved:o}=(0,n.useSelect)((e=>{const t=["postType","products",{}];return{pages:e(a.store).getEntityRecords(...t),hasResolved:e(a.store).hasFinishedResolution("getEntityRecords",t)}}),[]);return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"list-controls"},(0,e.createElement)(i,null)),(0,e.createElement)(g,{hasResolved:o,pages:t}))}window.addEventListener("load",(function(){const n=document.getElementById("my-custom-gutenberg-app");(0,t.createRoot)(n).render((0,e.createElement)(y,null))}),!1)}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,n,o,l)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,o,l]=e[d],c=!0,s=0;s<n.length;s++)(!1&l||r>=l)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(c=!1,l<r&&(r=l));if(c){e.splice(d--,1);var i=o();void 0!==i&&(t=i)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,o,l]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var o,l,[r,c,s]=n,i=0;if(r.some((t=>0!==e[t]))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var d=s(a)}for(t&&t(n);i<r.length;i++)l=r[i],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},n=globalThis.webpackChunkblock_development=globalThis.webpackChunkblock_development||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=a.O(void 0,[350],(()=>a(725)));o=a.O(o)})();