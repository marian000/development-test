(()=>{"use strict";var e,t={832:()=>{const e=window.React,t=window.wp.element,n=window.wp.data,a=window.wp.coreData,l=window.wp.components;function o({onCategoryChange:t,selectedCategoryId:a}){const o=(0,n.useSelect)((e=>e("core").getEntityRecords("taxonomy","product_categories",{per_page:100})||[]),[]);return(0,e.createElement)(l.SelectControl,{label:"Select a Category",value:a,options:[{label:"Select...",value:""},...o.map((e=>({label:e.name,value:e.id})))],onChange:t})}function r({onCancel:r,onSaveFinished:c}){const[s,i]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),[m,p]=(0,t.useState)(0),[g,E]=(0,t.useState)(""),[C,v]=(0,t.useState)(""),[h,b]=(0,t.useState)(!1),[y,S]=(0,t.useState)(""),[f,w]=(0,t.useState)(""),{saveEntityRecord:_}=(0,n.useDispatch)(a.store);return(0,n.useSelect)((e=>e(a.store).getEntityRecords("taxonomy","product_categories",{per_page:-1})),[]),(0,e.createElement)(l.PanelBody,null,(0,e.createElement)(l.TextControl,{label:"Product Title",value:s,onChange:i}),(0,e.createElement)(l.TextControl,{label:"Description",value:u,onChange:d}),(0,e.createElement)(l.Button,{isDefault:!0,onClick:()=>{wp.media({title:"Select or Upload Media",button:{text:"Use this media"},multiple:!1}).open().on("select",(()=>{const e=wp.media.frame.state().get("selection").first().toJSON();p(e.id)}))}},"Set Featured Image"),m&&(0,e.createElement)("p",null,"Image ID: ",m),(0,e.createElement)(l.TextControl,{label:"Price",value:g,onChange:E}),(0,e.createElement)(l.TextControl,{label:"Sale Price",value:C,onChange:v}),(0,e.createElement)(l.CheckboxControl,{label:"Is On Sale?",checked:h,onChange:b}),(0,e.createElement)(l.TextControl,{label:"YouTube Video URL",value:y,onChange:S}),(0,e.createElement)(o,{onCategoryChange:w,selectedCategoryId:f}),(0,e.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{console.log("save product");const e={title:s,content:u,status:"publish",featured_media:m,meta:{price:g,sale_price:C,is_on_sale:h,youtube_video:y},categories:[f]},t=await _("postType","products",e);console.log("savedRecord ",t),t&&c()},disabled:!s||!u},"Save Product"),(0,e.createElement)(l.Button,{onClick:r},"Cancel"))}function c(){const[n,a]=(0,t.useState)(!1),o=()=>a(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Button,{onClick:()=>a(!0),variant:"primary"},"Create a new Product"),n&&(0,e.createElement)(l.Modal,{onRequestClose:o,title:"Create a new Product"},(0,e.createElement)(r,{onCancel:o,onSaveFinished:o})))}const s=window.wp.htmlEntities;function i({onImageSelect:t}){return(0,e.createElement)(l.Button,{isPrimary:!0,onClick:()=>{const e=wp.media({title:"Select or upload media",button:{text:"Use this media"},multiple:!1});e.on("select",(()=>{const n=e.state().get("selection").first().toJSON();t(n.id)})),e.open()}},"Upload Image")}function u({pageId:r,onCancel:c,onSaveFinished:s}){const[u,d]=(0,t.useState)(""),[m,p]=(0,t.useState)(""),[g,E]=(0,t.useState)(0),[C,v]=(0,t.useState)(""),[h,b]=(0,t.useState)(""),[y,S]=(0,t.useState)(!1),[f,w]=(0,t.useState)(""),[_,x]=(0,t.useState)(""),{saveEditedEntityRecord:T}=(0,n.useDispatch)(a.store),{page:k}=(0,n.useSelect)((e=>({page:e(a.store).getEditedEntityRecord("postType","products",r)})),[r]);return(0,t.useEffect)((()=>{k&&(console.log("page ",k),d(k.title),p(k.content),E(k?.featured_media||0),v(k?.meta?.price||""),b(k?.meta?.sale_price||""),S(k?.meta?.is_on_sale||!1),w(k?.meta?.youtube_video||""),x(k?.product_categories?.[0]||""))}),[k]),(0,e.createElement)(l.PanelBody,null,(()=>{console.log(k)}),(0,e.createElement)(l.TextControl,{label:"Product Title",value:u,onChange:e=>d(e)}),(0,e.createElement)(l.TextControl,{label:"Description",value:m,onChange:e=>p(e)}),(0,e.createElement)(i,{onImageSelect:E}),g&&(0,e.createElement)("p",null,"Image ID: ",g),(0,e.createElement)(l.TextControl,{label:"Price",value:C,onChange:e=>v(e)}),(0,e.createElement)(l.TextControl,{label:"Sale Price",value:h,onChange:e=>b(e)}),(0,e.createElement)(l.CheckboxControl,{label:"Is On Sale?",checked:y,onChange:e=>S(e)}),(0,e.createElement)(l.TextControl,{label:"YouTube Video URL",value:f,onChange:e=>w(e)}),(0,e.createElement)(o,{selectedCategoryId:_,onCategoryChange:x}),(0,e.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{const e={title:u,content:m,featured_media:g,status:"publish",meta:{price:C,sale_price:h,is_on_sale:y,youtube_video:f},categories:[_]};console.log("productData",e);const t=await T("postType","products",r,e);console.log("updatedRecord ",t),t&&s()},disabled:!u||!m},"Update Product"),(0,e.createElement)(l.Button,{onClick:c},"Cancel"))}function d({pageId:n}){const[a,o]=(0,t.useState)(!1),r=()=>o(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Button,{onClick:()=>o(!0),variant:"primary"},"Edit"),a&&(0,e.createElement)(l.Modal,{onRequestClose:r,title:"Edit page"},(0,e.createElement)(u,{pageId:n,onCancel:r,onSaveFinished:r})))}function m({hasResolved:t,pages:n}){return t?n?.length?(0,e.createElement)("table",{className:"wp-list-table widefat fixed striped table-view-list"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("td",null,"Featured Image"),(0,e.createElement)("td",null,"Title"),(0,e.createElement)("td",{style:{width:190}},"Actions"))),(0,e.createElement)("tbody",null,n?.map((t=>{const n=t?.featured_image_src?(0,e.createElement)("img",{src:t?.featured_image_src,alt:t.title.rendered,style:{width:"50px"}}):(0,e.createElement)("img",{style:{width:"50px"},src:"https://via.placeholder.com/150",alt:t.title.rendered});return(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,n),(0,e.createElement)("td",null,(0,s.decodeEntities)(t.title.rendered)),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"form-buttons"},(0,e.createElement)(d,{pageId:t.id}),(0,e.createElement)(l.Button,{variant:"secondary"},"Delete"))))})))):(0,e.createElement)("div",null,"No results"):(0,e.createElement)(l.Spinner,null)}function p(){const{pages:t,hasResolved:l}=(0,n.useSelect)((e=>{const t=["postType","products",{}];return{pages:e(a.store).getEntityRecords(...t),hasResolved:e(a.store).hasFinishedResolution("getEntityRecords",t)}}),[]);return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"list-controls"},(0,e.createElement)(c,null)),(0,e.createElement)(m,{hasResolved:l,pages:t}))}window.addEventListener("load",(function(){const n=document.getElementById("my-custom-gutenberg-app");(0,t.createRoot)(n).render((0,e.createElement)(p,null))}),!1)}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,l,o)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,l,o]=e[u],c=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(c=!1,o<r&&(r=o));if(c){e.splice(u--,1);var i=l();void 0!==i&&(t=i)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,l,o]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[r,c,s]=n,i=0;if(r.some((t=>0!==e[t]))){for(l in c)a.o(c,l)&&(a.m[l]=c[l]);if(s)var u=s(a)}for(t&&t(n);i<r.length;i++)o=r[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=globalThis.webpackChunkblock_development=globalThis.webpackChunkblock_development||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=a.O(void 0,[350],(()=>a(832)));l=a.O(l)})();